# CI/Smoke
# CI_SMOKE=1 включаем только для smoke-проверок (см. `make smoke`).
# В обычной работе держим CI_SMOKE=0, чтобы неверный BOT_TOKEN падал сразу и заметно.
CI_SMOKE=0

# UID/GID приложения (Compose / права на /data)
# В проде bot/worker по умолчанию работают как 1000:1000 (пользователь app).
# Можно переопределить, если нужно (например, чтобы совпадало с владельцем данных в volume).
APP_UID=1000
APP_GID=1000

# Telegram
# Format must be digits:string (aiogram validates it).
# В `.env` ОБЯЗАТЕЛЬНО подставь реальный токен бота. Здесь намеренно "валидный по формату", но нерабочий.
BOT_TOKEN=123456789:AABBCCDDEEFFaabbccddeeff1234567890
ADMIN_USER_IDS=

# Storage
# yandex | local
STORAGE_MODE=local

# Yandex Disk (required when STORAGE_MODE=yandex)
YANDEX_OAUTH_TOKEN=
YANDEX_BASE_PATH=/Zkvpr

# Local storage
# Норма: хранить в /data, чтобы данные переживали рестарты и работали одинаково в dev/prod.
LOCAL_STORAGE_ROOT=/data/storage

# Database
# Норма: /data/app.db (SQLite WAL пишет рядом файлы -wal/-shm, поэтому /data должен быть writable для APP_UID:APP_GID).
SQLITE_PATH=/data/app.db

# Catalog
# Размер страницы в inline-навигации каталога (/categories). Меньше кнопок = меньше рисков по лимитам Telegram.
CATALOG_PAGE_SIZE=25
# Периодическая синхронизация каталога в worker (секунды). 0 = выключено, рекомендовано в prod: 3600.
CATALOG_SYNC_INTERVAL_SEC=0
# Страховочный лимит количества узлов, обходимых за одну синхронизацию.
CATALOG_SYNC_MAX_NODES=5000

# Queue
REDIS_URL=redis://redis:6379/0

# Local Telegram Bot API Server (optional but required for files > 50MB)
# When USE_LOCAL_BOT_API=1 bot/worker will use LOCAL_BOT_API_BASE instead of api.telegram.org
USE_LOCAL_BOT_API=0
LOCAL_BOT_API_BASE=http://local-bot-api:8081

# Required to run local-bot-api service (get api_id/api_hash from https://my.telegram.org)
TELEGRAM_API_ID=
TELEGRAM_API_HASH=

# Observability
LOG_LEVEL=INFO

# --- prod (Caddy / HTTPS)
ACME_EMAIL=
# METRICS_PASS must be a Caddy basicauth hash (use: caddy hash-password --plaintext "..." )
METRICS_USER=metrics
METRICS_PASS=

# Image for prod compose (your workflow expects it in .env)
IMAGE=ghcr.io/nikmagrus-creator/adaspeas_docs:latest
