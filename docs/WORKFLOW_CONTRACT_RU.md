## 0) Source of Truth и окружение (обязательные по умолчанию)
Часовой пояс по умолчанию для планирования и формулировок “сегодня/завтра”: **Europe/Moscow (MSK)**.
Таймстемпы в документах и таблицах “История изменений” фиксируем в **MSK** (UTC+3).

- Source of Truth для документации: https://github.com/nikmagrus-creator/adaspeas_docs
- Вложения/архивы из чата считать потенциально устаревшими. При любом сомнении требуется актуальный архив или ссылка на текущий commit.
- Ветка по умолчанию: `main`

Каноничные пути (раз и навсегда):
- Local (Linux Mint), репозиторий: `/home/nik/projects/adaspeas`
- Папка скачивания архивов: `/media/nik/0C30B3CF30B3BE50/Загрузки`
- VPS директория проекта: `/opt/adaspeas`

Хранилище (если используется Яндекс.Диск):
- Основная папка каталога: `Zkvpr` (не `Adaspeas`).

## 0.1) Золотое правило деплоя
- VPS обновляется **только** через репозиторий и CI/CD. Ручные изменения на VPS запрещены.
- Любые изменения: локально → `git commit` → `git push` → CI применяет на VPS.

---


## 0.3) Git remote может быть недоступен (trade controls / блокировки)

Случаи, когда GitHub временно недоступен (DNS/сеть, trade controls, санкции) считаются **нормальным риском**, не “катастрофой”.

Правила:

- Коммиты делаем локально как обычно, история не теряется.
- Держим **fallback remote** (зеркало) на альтернативном хостинге (например: Codeberg/GitLab/self-hosted Gitea).
- Если из‑за ограничений нужно, репозиторий может быть **временно переведён в public** (как сейчас), но:
  - секреты/ключи/токены в git запрещены (см. guard по .env);
  - после восстановления нормального режима доступов возвращаем прежнюю политику видимости.
- После восстановления GitHub делаем sync обратно: `git push --mirror` или обычные ветки/теги по ситуации.



## 3) Память проекта: итоги чатов и решения
Сырая переписка в чате не является Source of Truth. Всё, что “надо помнить дальше”, фиксируем в репозитории:

- Итоги каждой существенной сессии: `docs/CHATLOG_RU.md` (MSK, кратко, по делу).
- Принятые решения: `docs/adr/` (ADR). Шаблон: `docs/adr/ADR-000-template.md`.

Правило: если в чате появилось полезное правило/решение/изменение планов, оно должно быть отражено в CHATLOG и, если это влияет на архитектуру/процесс, подкреплено ADR.

## 1) Source-of-Truth и вложения

### 1.1) Источник правды (SoT)
- **Единственный Source of Truth** по коду/докам/процессу: репозиторий GitHub.
- Любое утверждение «как устроено / где лежит / что делать» подтверждаем файлами в `main`.
- Если в чате есть противоречие с репозиторием — **верим репозиторию**, а чат считаем черновиком/шумом.

### 1.2) Правило вложений (архивов) из чата
- Любые вложения/архивы из чата — **потенциально устаревшие**.
- Вложения допустимы только когда ассистент **не может** получить это из репозитория (например: внешний закрытый файл, дамп/артефакт, который не должен коммититься).
- Если есть хоть малейшее сомнение, что вложение актуально (или оно «не совпадает» с репозиторием):
  - требуем **актуальный** архив/файл (или ссылку на конкретный commit),
  - сверяем по дереву репозитория после применения.

### 1.3) Когда изменение считается «готовым»
Изменение считается поставленным **только** если оно:
- оформлено как **инкрементальный `tar.gz` пакет** (только изменённые файлы, корректные пути от корня репозитория),
- при наличии удалений содержит `.pack/deleted.txt`,
- применимо воспроизводимо (один короткий безопасный блок команд: применить → удалить при необходимости → `git status` → commit → push).

Шаблон (каноничный) для применения инкрементальных пакетов: `docs/PACK_APPLY_TEMPLATE_RU.md`.

## X) Надёжность remote: trade-controls/санкции/блокировки
Remote может временно стать недоступен из‑за внешних ограничений (например, GitHub trade controls). В этом случае:
- коммиты делаем как обычно локально,
- держим зеркальный remote (fallback) на альтернативном хостинге,
- после восстановления основного remote делаем sync обратно.

Примечание: временный перевод репозитория в public допустим только как вынужденная мера, и должен быть отражён в `docs/CHATLOG_RU.md` (дата/время MSK, причина, план возврата).
