# ROADMAP (RU): приоритеты разработки

Актуально на: 2026-02-06 00:10 MSK

Этот документ фиксирует порядок работ. Детали требований см. `docs/PRD_RU.md`, целевую архитектуру — `docs/TECH_SPEC_RU.md`.


## Milestone 1 — Фундамент и UX каталога (приоритет №1)

Цель: бот должен выглядеть как продукт и уметь выдавать файлы “библиотечного” размера.

1) **Inline‑навигация каталога**
- папки и файлы через inline‑кнопки
- редактирование одного сообщения
- кнопка Назад

2) **Local Bot API Server в `--local`**
- docker‑сервис `telegram-bot-api`
- переключение bot/worker на `LOCAL_BOT_API_URL`
- тест на файл > 50 MB

3) **Фоновая синхронизация каталога**
- UI читает только SQLite
- синхронизация отдельной задачей в worker
- полноценная пагинация `limit/offset`
- метка “обновлено …”

4) **Кэширование Telegram file_id**
- `tg_file_id` в `catalog_items`
- повторная отправка без скачивания с Диска

Выходной критерий M1:
- активный пользователь кликает папки/файлы и получает файл в 2–3 клика, включая файлы > 50 MB.


## Milestone 2 — Контроль доступа (приоритет №2)

Цель: ограниченный доступ без инвайт‑кодов, управляемый админом.

- FSM/статусы пользователей: guest → pending → active → expired/blocked
- профиль/поле идентификации от пользователя (user_note)
- админ‑экран: список пользователей, срок, продление, блокировка
- предупреждение за 24 часа пользователю и админу


## Milestone 3 — Эксплуатация и прозрачность (приоритет №3)

Цель: чтобы админ понимал, что происходит, и система не “умирала тихо”.

- аудит скачиваний (кто/что/когда/результат)
- статистика для админа (минимум: топ файлов, активные пользователи)
- нормальные сообщения об ошибках + уведомления в `ADMIN_CHAT_ID`
- бэкапы SQLite (+ volume telegram-bot-api)


## Бэклог (не срочно)

- поиск по каталогу
- “избранное”/последние файлы
- предзагрузка (warm‑cache) в техканал
